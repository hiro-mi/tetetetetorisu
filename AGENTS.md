# AGENTS.md — HTML/JS テトリス系クソゲープロジェクト作業要領

## 🎯 ゴールと非ゴール
- デスクトップ向けブラウザで動く **テトリス風クソゲー** を純粋な HTML/CSS/JavaScript だけで実装する。
- 「遊べるが雑」という塩梅を目指し、挙動のクセ・理不尽なスコア計算・微妙な配色などでクソゲー感を演出する。
- ゲームが頻繁にフリーズしたり、操作不能に陥る状態はバグとして扱い、避ける。

**やらないこと**
- モバイル最適化や凝ったレスポンシブ対応。
- React/Vue などのフレームワーク導入やビルドツール導入。
- オンライン機能や複雑なメニュー階層。

### **PRポリシー**
* **.github/pull\_request\_template.md** の項目を **すべて** 扱うこと。  

---

## 🧱 技術スタックと推奨ファイル構成
- 使用技術：HTML5、バニラ ES6、必要最低限の CSS。
- 想定ファイル：
  - `index.html` : 画面レイアウト、canvas、操作 UI の定義。
  - `style.css`   : 見た目の微調整。
  - `game.js`     : ブロック落下やライン消去などのゲームロジック。
  - `input.js`    : キー操作や意図的な操作性のクセ付け（必要に応じて分離）。
  - `README.md`   : プレイヤー向け説明書き。
  - `AGENTS.md`   : このガイドライン。
- ディレクトリは可能な限り浅く保ち、用途が明確に分かれた場合のみサブディレクトリを作る。

---

## 🤖 エージェント役割
| エージェント | 主な担当 | 呼び出す場面 | 期待するアウトプット |
|--------------|----------|--------------|------------------------|
| Planner      | 仕様整理、アイデア出し、タスク分解 | 方向性を固めたいとき、最初の TODO を作りたいとき | 箇条書きのタスク、フロー案 |
| Coder        | 実装、軽いリファクタ | 小規模な機能を追加・修正したいとき | コードブロックと簡潔な説明 |
| Reviewer     | レビュー、クソゲー度の調整提案 | 動作するコードの改善点を洗い出すとき | 指摘リストと修正提案 |

**必要に応じて追加する補助役**
- BugHunter：バグ再現手順・デバッグ方針の提示。
- UXTroll：理不尽さを増すギミックの提案。

---

## 📝 作業ルール
- **言語**：解説・コメントは日本語。識別子や関数名は英語を用いる。
- **コードスタイル**：
  - 外部ライブラリ禁止。ブラウザ標準 API のみを使用。
  - グローバルを極力避け、関数またはモジュール単位で状態を管理。クラスは必要に応じて使用可。
  - インデントは基本 2 スペース。既存ファイルに別の幅があれば合わせる。
- **作業粒度**：
  - 変更は小さくまとめ、1 回のコミット・PR で完結させる。
  - 意図的に理不尽な仕様を入れる場合はコメントで理由を明記し、後から調整できるようにする。
- **出力形式**：
  - コード例は必ず ```html / ```css / ```js などのフェンスで囲む。
  - TODO や提案は箇条書きを基本とし、可読性を優先する。

---

## 🔁 推奨ワークフロー
1. Planner に目的や機能案を整理してもらい、着手範囲を決める。
2. Coder が単機能を実装し、必要なら動作確認を行う。
3. Reviewer がバグやクソゲー要素のバランスを確認し、改善点を提示する。
4. 調整後、次のアイデアや改善点を backlog に追加する。

---

## 💡 クソゲーアイデアメモ
- 連続消しでもあまり増えない（もしくは減る）独特なスコア計算。
- 消したライン数に応じて画面色が不快に点滅する。
- ランダムに操作遅延や操作逆転が発生するイベント（発生条件はコメントで明示）。
- 効果音は過剰にチープ、または一切鳴らない。

アイデアは実装状況に合わせて更新し、実現したものはチェックして履歴を残す。
